# .github/workflows/simple-test.yml
name: Simple Code Test

on: workflow_dispatch

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - run: pip install requests pandas numpy
    
    - name: Check files
      run: |
        echo "📁 檢查文件結構"
        find scripts -name "*.py" 2>/dev/null | head -10 || echo "No Python files found"
        ls -la scripts/ || echo "No scripts directory"
    
    - name: Test basic import
      run: |
        cd scripts
        python -c "print('🧪 Python環境測試'); import sys; print(f'Python版本: {sys.version}')"
        python -c "import requests; print('✅ requests可用')"
        python -c "import pandas; print('✅ pandas可用')"
    
    - name: Test config import
      run: |
        cd scripts
        python -c "
try:
    from config.etf_config import ETF_INFO
    print('✅ 配置導入成功')
    print(f'ETF數量: {len(ETF_INFO)}')
except Exception as e:
    print(f'❌ 配置導入失敗: {e}')
        "
    
    - name: Test Firebase client
      run: |
        cd scripts
        python -c "
try:
    from core.firebase_client import FirebaseClient
    client = FirebaseClient()
    print('✅ Firebase客戶端創建成功')
except Exception as e:
    print(f'❌ Firebase客戶端失敗: {e}')
        "
    
    - name: Test dashboard
      run: |
        cd scripts
        python -c "
try:
    from generate_dashboard import ModularDashboard
    dashboard = ModularDashboard()
    print('✅ 儀表板創建成功')
except Exception as e:
    print(f'❌ 儀表板創建失敗: {e}')
        "
    
    - name: Summary
      run: |
        echo "🎉 基本測試完成"
        echo "如果看到多個✅，說明系統基本正常"
