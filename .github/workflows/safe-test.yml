name: Ultra Simple Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Install packages
      run: pip install requests pandas numpy
    
    - name: Check files exist
      run: |
        echo "Checking if files exist..."
        ls -la scripts/ || echo "No scripts folder"
        ls -la scripts/config/ || echo "No config folder"
        ls -la scripts/core/ || echo "No core folder"
    
    - name: Test Python environment
      run: |
        cd scripts
        python -c "print('Python works')"
        python -c "import sys; print('Python version:', sys.version)"
    
    - name: Test config import
      run: |
        cd scripts
        python -c "
import sys
sys.path.append('.')
try:
    from config.etf_config import ETF_INFO
    print('Config import SUCCESS')
    print('ETF count:', len(ETF_INFO))
except Exception as e:
    print('Config import FAILED:', e)
        "
    
    - name: Test Firebase client
      run: |
        cd scripts
        python -c "
import sys
sys.path.append('.')
try:
    from core.firebase_client import FirebaseClient
    client = FirebaseClient()
    print('Firebase client SUCCESS')
    print('Firebase URL:', client.firebase_url)
except Exception as e:
    print('Firebase client FAILED:', e)
        "
    
    - name: Test dashboard
      run: |
        cd scripts
        python -c "
import sys
sys.path.append('.')
try:
    from generate_dashboard import ModularDashboard
    dashboard = ModularDashboard()
    print('Dashboard creation SUCCESS')
except Exception as e:
    print('Dashboard creation FAILED:', e)
        "
    
    - name: Test main analyzer
      run: |
        cd scripts
        python -c "
import sys
sys.path.append('.')
try:
    import main_analyzer
    print('Main analyzer import SUCCESS')
    if hasattr(main_analyzer, 'main'):
        print('Main function found')
    else:
        print('No main function')
except Exception as e:
    print('Main analyzer import FAILED:', e)
        "
    
    - name: Final result
      run: |
        echo "Test completed!"
        echo "Check above for SUCCESS/FAILED messages"
